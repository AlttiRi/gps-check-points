import{d as A,c as w,r as y,e as D,o as c,a as i,b as n,F as m,f as g,g as b,t as f,u as P,h as O,s as I,i as k,p as N,j,k as x,l as L}from"./vendor.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const _ of t.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const S=r=>(N("data-v-6aa6365b"),r=r(),j(),r),H={class:"main"},B=["disabled"],E={key:0,class:"coord"},V={class:"date"},F=S(()=>n("td",null,"timestamp",-1)),$={class:"saved"},G={key:0,class:"saved-coord"},J=S(()=>n("hr",null,null,-1)),R={class:"date"},U=S(()=>n("hr",null,null,-1)),q=A({__name:"Main",setup(r){const l=w("GPS_Points_DB","GPS_Points"),a=y(),u=y([]);(async function(){const d=await D(l);for(const s of d)u.value.push({timestamp:s[0],coords:s[1]})})();async function e(){return new Promise((o,d)=>{navigator.geolocation.getCurrentPosition(s=>o(s),s=>d(s),{enableHighAccuracy:!0})})}function t(o){const d={};for(const s in o){if(Y(o[s])){d[s]=t(o[s]);continue}d[s]=o[s]}return d}async function _(){try{a.value=await e(),v.value=!1}catch(o){alert(JSON.stringify(t(o),null,"  "))}}_();const v=y(!1);async function M(){if(a.value)try{await I(a.value.timestamp,t(a.value.coords),l),u.value.push(t(a.value)),v.value=!0}catch(o){alert(JSON.stringify(t(o),null,"  "))}}function Y(o){return typeof o=="object"&&!Array.isArray(o)&&o!==null}return(o,d)=>(c(),i(m,null,[n("div",H,[n("button",{onClick:_},"Update Point"),n("button",{onClick:M,disabled:v.value},"Save Point",8,B),a.value?(c(),i("table",E,[(c(!0),i(m,null,g(Object.entries(t(a.value.coords)).filter(([s,p])=>p),([s,p])=>(c(),i("tr",null,[n("td",null,f(s),1),b(": "),n("td",null,f(p),1)]))),256)),n("tr",V,[F,b(": "),n("td",null,f(P(k)(a.value.timestamp,"YYYY.MM.DD HH:mm:SS",!1)),1)])])):O("",!0)]),n("div",$,[u.value.length?(c(),i("div",G,[J,(c(!0),i(m,null,g(u.value,s=>(c(),i("div",null,[n("div",R,f(P(k)(s.timestamp,"YYYY.MM.DD HH:mm:SS",!1)),1),(c(!0),i(m,null,g(Object.entries(s.coords).filter(([p,h])=>h),([p,h])=>(c(),i("div",null,[n("span",null,f(p),1),b(": "),n("span",null,f(h),1)]))),256)),U]))),256))])):O("",!0)])],64))}});const C=(r,l)=>{const a=r.__vccOpts||r;for(const[u,e]of l)a[u]=e;return a},K=C(q,[["__scopeId","data-v-6aa6365b"]]),T=r=>(N("data-v-2724c669"),r=r(),j(),r),z=T(()=>n("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/gps-test",target:"_blank"},[n("i",null,"i")],-1)),Q=A({__name:"App",setup(r){return(l,a)=>(c(),i(m,null,[x(K),z],64))}});const W=C(Q,[["__scopeId","data-v-2724c669"]]);L(W).mount("#app");
//# sourceMappingURL=index.js.map
