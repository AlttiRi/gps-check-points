import{d as A,c as w,r as y,e as D,o as i,a as l,b as n,F as v,f as g,g as b,t as f,u as P,h as O,s as I,i as k,p as N,j,k as x,l as L}from"./vendor.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const _ of t.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const S=a=>(N("data-v-04c01db5"),a=a(),j(),a),H={class:"main"},B=["disabled"],E={key:0,class:"coord"},V={class:"date"},F=S(()=>n("td",null,"timestamp",-1)),$={class:"saved"},G={key:0,class:"saved-coord"},J=S(()=>n("hr",null,null,-1)),R={class:"date"},U=S(()=>n("hr",null,null,-1)),q=A({__name:"Main",setup(a){const u=w("GPS_Points_DB","GPS_Points"),r=y(),c=y([]);(async function(){const d=await D(u);for(const s of d)c.value.push({timestamp:s[0],coords:s[1]});c.value=c.value.reverse()})();async function e(){return new Promise((o,d)=>{navigator.geolocation.getCurrentPosition(s=>o(s),s=>d(s),{enableHighAccuracy:!0})})}function t(o){const d={};for(const s in o){if(Y(o[s])){d[s]=t(o[s]);continue}d[s]=o[s]}return d}async function _(){try{r.value=await e(),m.value=!1}catch(o){alert(JSON.stringify(t(o),null,"  "))}}_();const m=y(!1);async function M(){if(r.value)try{await I(r.value.timestamp,t(r.value.coords),u),c.value.unshift(t(r.value)),m.value=!0}catch(o){alert(JSON.stringify(t(o),null,"  "))}}function Y(o){return typeof o=="object"&&!Array.isArray(o)&&o!==null}return(o,d)=>(i(),l(v,null,[n("div",H,[n("button",{onClick:_},"Update Point"),n("button",{onClick:M,disabled:m.value},"Save Point",8,B),r.value?(i(),l("table",E,[(i(!0),l(v,null,g(Object.entries(t(r.value.coords)).filter(([s,p])=>p),([s,p])=>(i(),l("tr",null,[n("td",null,f(s),1),b(": "),n("td",null,f(p),1)]))),256)),n("tr",V,[F,b(": "),n("td",null,f(P(k)(r.value.timestamp,"YYYY.MM.DD HH:mm:SS",!1)),1)])])):O("",!0)]),n("div",$,[c.value.length?(i(),l("div",G,[J,(i(!0),l(v,null,g(c.value,s=>(i(),l("div",null,[n("div",R,f(P(k)(s.timestamp,"YYYY.MM.DD HH:mm:SS",!1)),1),(i(!0),l(v,null,g(Object.entries(s.coords).filter(([p,h])=>h),([p,h])=>(i(),l("div",null,[n("span",null,f(p),1),b(": "),n("span",null,f(h),1)]))),256)),U]))),256))])):O("",!0)])],64))}});const C=(a,u)=>{const r=a.__vccOpts||a;for(const[c,e]of u)r[c]=e;return r},K=C(q,[["__scopeId","data-v-04c01db5"]]),T=a=>(N("data-v-2724c669"),a=a(),j(),a),z=T(()=>n("a",{class:"readme",title:"Open Readme",href:"https://github.com/AlttiRi/gps-test",target:"_blank"},[n("i",null,"i")],-1)),Q=A({__name:"App",setup(a){return(u,r)=>(i(),l(v,null,[x(K),z],64))}});const W=C(Q,[["__scopeId","data-v-2724c669"]]);L(W).mount("#app");
//# sourceMappingURL=index.js.map
